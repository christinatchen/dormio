
<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>openSleep</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <link rel="stylesheet" type="text/css" href="css/style.css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900" rel="stylesheet">
  <script src="js/multithread.js"></script>
  <script src="js/d3.v4.min.js"></script>
  <script src="js/FileSaver.min.js"></script>
  <script src="js/jszip.min.js"></script>
  <script src="js/hr.js"></script>
  <script src="js/script.js"></script>


</head>

<body>
  <div id = "container">
    
    <div id = "header">
      <img src="img/icon.png" id="icon">
    </div> <!-- close header-->

    <div id = "content">

      <div id = "left">

        <div id="channels">

          <div id="channel-bpm" class="channel">
          
            <div class = "channel-icon">

              <img id="hr-img" src="img/hr.svg">
              <div id="bpm" class="channel-value">0</div>
            </div>

          </div>
    
        <div id="channel-flex" class="channel">

          <div class = "channel-icon">

            <img src="img/flex.svg" id="flex-img">
            <div id="flex" class="channel-value">0</div>
          </div>
        </div>
    
        <div id="channel-eda" class="channel">
        
          <div class = "channel-icon">

            <img src="img/eda.svg" id="eda-img">
            <div id="eda" class="channel-value">0</div>
          </div>
            </div>

            <div class = deltas>
              <img id = "delta-img" src = "img/delta.svg">
              <input type="text" name="delta_hr" id="delta-hr">
              <input type="text" name="delta_flex" id="delta-flex">
              <input type="text" name="delta_eda" id="delta-eda" value = "5">
              

            </div>

                          <div id = "delta-labels">
              <span class = "delta-label">hr</span>
              <span class = "delta-label">flex</span>
              <span class = "delta-label">eda</span>
            </div>

            <div class="buttons-left">
          <button id="connect">Connect</button>
          <button id="calibrate">Calibrating...</button>
        </div>

      </div> <!-- close channels -->
        
      <svg width="1200" height="500" id="plot"></svg>

    </div> <!-- end left -->

    <div id="user">
      
      <div id="user-name" class="user-elem">
        <div class="user-label">what is your name?</div>
        <input type="text" name="name" id="name">
      </div>

      <div id="user-dream-subject" class="user-elem">
        <div class="user-label">what do you want to dream about?</div>
        <input type="text" name="dream_subject" id="dream-subject">
      </div>

      <div class="user-elem">
        <div class="user-label">record prompt message</div>
        <div class = "recording">
          <div class = "recording-circle" id = "recording-circle-sleep"></div>
          <img src="img/microphone.svg" id="mic">
            <div class = "record-buttons">
            <input type="submit" name="record_sleep_message" id="record-sleep-message" class = "big-button" value="record">
                <div class = "small-record-buttons">
                  <input type="submit" name="listen_sleep_message" class = "small-button" id="listen-sleep-message" value="listen">
                  <input type="submit" name="clear_sleep_message" class = "small-button" id="clear-sleep-message" value="clear">
                </div>
            </div>
        </div>
      </div>

      <div class="user-elem">
        <div class="user-label">record wakeup message</div>
        <div class = "recording">
          <div class = "recording-circle" id = "recording-circle-sleep"></div>
          <img src="img/microphone.svg" id="mic">
            <div class = "record-buttons">
          <input type="submit" name="record_wakeup_message" class = "big-button" id="record-wakeup-message" value="record">
          
          <div class = "small-record-buttons">
          <input type="submit" name="listen_wakeup_message" class = "small-button" id="listen-wakeup-message" value="listen">
          <input type="submit" name="clear_wakeup_message" class = "small-button" id="clear-wakeup-message" value="clear">
                </div>
                </div>
        </div>
      </div>

      <form>
        <table border="0" margin = "0" width = "100%">

          <tr class = "user-elem">
            <td id = "user-loops">
              <div class = "user-label">How many dreams to catch?
					<span class="tooltip">
                  <img src = "img/tooltip.svg">
                  <span class="tooltiptext">This is how many times you want to be woken up and fall back asleep.</span>
                 </span>
              </div>
              <input type="text" name="loops" id = "loops" value="" selectBoxOptions="1;2;3;4;5;">
              <div class = "time-units">dreams</div>
            </td>
          </tr>
          
          <tr class = "user-elem">
            <td id = "user-hypna-latency">
              <p class = "user-label">How long will you stay in hypnagogia? 
                <span class="tooltip">
                  <img src = "img/tooltip.svg">
                  <span class="tooltiptext">This is the amount of time that you'll stay in a state of light sleep (hypnagogia) before the Dormio system prompts you again to remind you what to dream about.</span>
                 </span>
            </p><input type="text" name="hypna_latency" id = "hypna-latency" value="" selectBoxOptions="1;2;3;">
            <div class = "time-units">minutes</div>
          </td></tr>
          
          <tr class = "user-elem">
            <td id = "user-time-between-sleep">
              <p class = "user-label">After your first wakeup, how long will it take you to fall asleep again?
                <span class="tooltip">
                  <img src = "img/tooltip.svg">
                  <span class="tooltiptext">This is how long it will take for you to fall asleep again after being awoken by Dormio and reporting your dream.</span>
                 </span>
               </p><input type="text" name="time_between_sleep" id = "time-between-sleep" value="" selectBoxOptions="5;10;15;">
             <div class = "time-units">minutes</div>
           </td></tr>
          
          <tr class = "user-elem">
            <td id = "user-recording-time">
              <p class = "user-label">How long will your dream report to be?
                <span class="tooltip">
                  <img src = "img/tooltip.svg">
                  <span class="tooltiptext">This is how long Dormio will record your dream report for.</span>
                 </span>
              </p><input type="text" name="recording_time" id = "recording-time" value="" selectBoxOptions="15;20;25;30;35;40;">
             <div class = "time-units">seconds</div>
            </td></tr>

          <tr class = "user-elem">
            <td id = "user-min-time">
              <p class = "user-label">How long do you estimate that it will take you to fall asleep?
              <span class="tooltip">
                  <img src = "img/tooltip.svg">
                  <span class="tooltiptext" style="left: 50px;right: 0%">This is the minimum amount of time that Dormio will refrain from detecting and interrupting your sleep, to protect against too-early sleep detection. During the window between this minimum time and maximum time, Dormio will actively detect sleep.</span>
                 </span>
               </p><input type="text" name="min_time" id = "min-time" value="" selectBoxOptions="1;2;3;4;5;">
             <div class = "time-units">minutes</div>
             </td></tr>

<!--              box for min and max
 -->
          <tr class = "user-elem">
            <td id = "user-max-time">
              <p class = "user-label">What's the maximum amount of time you want to be left uninterrupted?
              <span class="tooltip">
                  <img src = "img/tooltip.svg">
                  <span class="tooltiptext" style="left: -60px;right: 0%">This is the maximum amount of time that Dormio will refrain from detecting and interrupting your sleep, to protect against too-late sleep detection. During the window between minimum time and this maximum time, Dormio will actively detect sleep. If sleep is not detected during this window, Dormio will automatically prompt the user and begin the wakeup process.</span>
                 </span>
               </p><input type="text" name="max_time" id = "max-time" value="" selectBoxOptions="5;6;7;8;9;">
              <div class = "time-units">minutes</div>
          </td></tr>

          <tr class = "user-elem">
            <td id = "user-calibration-time">
              <p class = "user-label">How many minutes do you want to calibrate Dormio?</p>
              <input type="text" name="calibration_time" id = "calibration-time" value="" selectBoxOptions="5;6;7;8;9;">
                   <div class = "time-units">minutes</div>

            </td></tr>

        </table>
      </form>

      <div class="buttons-right">
        <div id="bluetooth_help">To enable Web Bluetooth API, copy <b>chrome://flags/#enable-experimental-web-platform-features</b> to your Chrome address bar</div>
        
        <span id="start_buttons">
        <button id="start_biosignal">Start Biosignal Session</button>
        </span>
        
        <span id="session_buttons">
          <button id="stop_session" style="background:rgba(255, 0, 0, .4); height: 50%">Stop Session</button>
          <!-- <button id="calibrate">Calibrating...</button> -->
        <button id="wakeup" style="height:50%">Wakeup</button>
        </span>
      </div>


  </div> <!-- end user -->

  </div> <!-- end content -->
</div><!-- end big container -->

<script type="text/javascript">
createEditableSelect(document.forms[0].loops);
createEditableSelect(document.forms[0].hypna_latency);
createEditableSelect(document.forms[0].time_between_sleep);
createEditableSelect(document.forms[0].recording_time);
createEditableSelect(document.forms[0].min_time);
createEditableSelect(document.forms[0].max_time);
createEditableSelect(document.forms[0].calibration_time);
</script>

</body>

<script src="js/WebAudioRecorder.min.js"></script>


</html>
